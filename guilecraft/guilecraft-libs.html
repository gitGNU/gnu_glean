<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>guilecraft-libs</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="guilecraft-libs"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2012-11-10T10:26+0000"/>
<meta name="author" content="Alex Sassmannshausen"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012  Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">guilecraft-libs</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 A Journey Through a Guilecraft Game</a>
<ul>
<li><a href="#sec-1-1">1.1 Initialization</a>
<ul>
<li><a href="#sec-1-1-1">1.1.1 introduce way to select user profile</a></li>
</ul>
</li>
<li><a href="#sec-1-2">1.2 First Question</a></li>
<li><a href="#sec-1-3">1.3 First Evaluation</a></li>
<li><a href="#sec-1-4">1.4 Back to Go</a></li>
</ul>
</li>
<li><a href="#sec-2">2 The Session Controller</a>
<ul>
<li>
<ul>
<li><a href="#sec-2-1">2.1 Allow for a way to switch module, level:</a></li>
<li><a href="#sec-2-2">2.2 Allow for a way to switch username</a></li>
</ul>
</li>
<li><a href="#sec-2-1">2.1 Guile Documentation</a></li>
<li><a href="#sec-2-2">2.2 Module Definition</a></li>
<li><a href="#sec-2-3">2.3 Session Manager</a>
<ul>
<li><a href="#sec-2-3-1">2.3.1 Introduction</a></li>
<li><a href="#sec-2-3-2">2.3.2 Code</a></li>
</ul>
</li>
<li><a href="#sec-2-4">2.4 Old Functions</a>
<ul>
<li><a href="#sec-2-4-1">2.4.1 Request Challenge</a></li>
<li><a href="#sec-2-4-2">2.4.2 Problem ID Store</a></li>
<li><a href="#sec-2-4-3">2.4.3 Request Evaluation</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-3">3 The Generator</a>
<ul>
<li><a href="#sec-3-1">3.1 Guile Documentation</a></li>
<li><a href="#sec-3-2">3.2 Module Definition</a></li>
<li><a href="#sec-3-3">3.3 Generator</a>
<ul>
<li><a href="#sec-3-3-1">3.3.1 Introduction</a></li>
<li><a href="#sec-3-3-2">3.3.2 Code</a></li>
</ul>
</li>
<li><a href="#sec-3-4">3.4 Select Tag</a>
<ul>
<li><a href="#sec-3-4-1">3.4.1 Introduction</a></li>
<li><a href="#sec-3-4-2">3.4.2 Code</a></li>
</ul>
</li>
<li><a href="#sec-3-5">3.5 Old Functions</a>
<ul>
<li><a href="#sec-3-5-1">3.5.1 Choose Problem</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-4">4 The Balancer</a>
<ul>
<li>
<ul>
<li><a href="#sec-4-1">4.1 Balancer should be written to use a stream internally to generate the next set of lowest scoring tags.</a></li>
</ul>
</li>
<li><a href="#sec-4-1">4.1 Guile Documentation</a></li>
<li><a href="#sec-4-2">4.2 Module Definition</a></li>
<li><a href="#sec-4-3">4.3 Request Tags: public access</a>
<ul>
<li><a href="#sec-4-3-1">4.3.1 Intro</a></li>
<li><a href="#sec-4-3-2">4.3.2 Code</a></li>
</ul>
</li>
<li><a href="#sec-4-4">4.4 Helper Functions: initial population and retrieving the lowest ranking set</a></li>
<li><a href="#sec-4-5">4.5 Updating the rank-table</a>
<ul>
<li><a href="#sec-4-5-1">4.5.1 Code:</a></li>
</ul>
</li>
<li><a href="#sec-4-6">4.6 State: rank-table</a></li>
</ul>
</li>
<li><a href="#sec-5">5 The Library</a>
<ul>
<li><a href="#sec-5-1">5.1 Guile Documentation</a></li>
<li><a href="#sec-5-2">5.2 Module Definition</a></li>
<li><a href="#sec-5-3">5.3 Librarian:</a></li>
<li><a href="#sec-5-4">5.4 Library</a></li>
<li><a href="#sec-5-5">5.5 Library as a stream</a></li>
<li><a href="#sec-5-6">5.6 Old functions:</a></li>
</ul>
</li>
<li><a href="#sec-6">6 The File Server</a>
<ul>
<li><a href="#sec-6-1">6.1 Introduction</a>
<ul>
<li><a href="#sec-6-1-1">6.1.1 When is file-server used?</a></li>
<li><a href="#sec-6-1-2">6.1.2 Guilecraft is non-destructive</a></li>
</ul>
</li>
<li><a href="#sec-6-2">6.2 Module definition</a></li>
<li><a href="#sec-6-3">6.3 Entrance — get-from-file-server, put-on-file-server and select-from-file-server:</a>
<ul>
<li><a href="#sec-6-3-1">6.3.1 get-from-file-server</a></li>
<li><a href="#sec-6-3-2">6.3.2 put-on-file-server</a></li>
<li><a href="#sec-6-3-3">6.3.3 select-from-file-server</a></li>
<li><a href="#sec-6-3-4">6.3.4 Helper functions</a></li>
</ul></li>
</ul>
</li>
<li><a href="#sec-7">7 The Data Types</a>
<ul>
<li><a href="#sec-7-1">7.1 Guile Documentation</a></li>
<li><a href="#sec-7-2">7.2 Module Definition</a></li>
<li><a href="#sec-7-3">7.3 Creators</a>
<ul>
<li><a href="#sec-7-3-1">7.3.1 Question</a></li>
<li><a href="#sec-7-3-2">7.3.2 Solution</a></li>
<li><a href="#sec-7-3-3">7.3.3 Tag</a></li>
<li><a href="#sec-7-3-4">7.3.4 Problems</a></li>
<li><a href="#sec-7-3-5">7.3.5 Level</a></li>
<li><a href="#sec-7-3-6">7.3.6 Module</a></li>
</ul>
</li>
<li><a href="#sec-7-4">7.4 Selectors</a></li>
<li><a href="#sec-7-5">7.5 Predicates</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> A Journey Through a Guilecraft Game</h2>
<div class="outline-text-2" id="text-1">


</div>

<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Initialization</h3>
<div class="outline-text-3" id="text-1-1">

<ol>
<li>Client -&gt; Controller: (controller 'list-modules)
<ol>
<li>Controller -&gt; Library: (request-module-list)
<ol>
<li>Library -&gt; File-Server: (get-from-file-server 'scan-modules)
</li>
<li>File-Server -&gt; Library: list-of-modules
</li>
</ol>

</li>
<li>Library -&gt; Controller: list-of-modules
</li>
</ol>

</li>
<li>Controller -&gt; Client: list-of-modules
</li>
</ol>


</div>

<div id="outline-container-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> <span class="todo TODO">TODO</span> introduce way to select user profile &nbsp;&nbsp;&nbsp;<span class="tag"><span class="roadmap">roadmap</span></span></h4>
<div class="outline-text-4" id="text-1-1-1">

</div>
</div>

</div>

<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> First Question</h3>
<div class="outline-text-3" id="text-1-2">

<ol>
<li>Client -&gt; Controller: (controller 'generate-question module-name user-name level)
<ol>
<li>= Controller: module-name/user-name/level/
</li>
<li>Controller -&gt; Generator: (compile-question)
<ol>
<li>Generator -&gt; Balancer: (request-tags)
<ol>
<li>if 'tag-list empty: Balancer -&gt; Controller: (request-current-module)
<ol>
<li>Controller -&gt; Balancer: current-module-name
</li>
<li>Balancer -&gt; File-Server: (get-from-file-server 'balancer-data current-module-name)
</li>
<li>if File-Server data: File-Server -&gt; Balancer: balancer-current-module-data
</li>
</ol>

</li>
<li>Balancer -&gt; Library: (request-current-tags-set)
<ol>
<li>Library -&gt; Controller: (request-current-module)
</li>
<li>Controller -&gt; Library: current-module-name
<ol>
<li>Library -&gt; File-Server: (get-from-file-server 'load-module current-module-name)
</li>
<li>File-Server -&gt; Library: rules, tag-streams, tag-list
</li>
<li>= Library: rules/tag-streams/tag-list/
</li>
</ol>

</li>
</ol>

</li>
<li>Library -&gt; Balancer: tag-list
</li>
<li>= Balancer: tag-list/scores/schedules/
</li>
</ol>

</li>
<li>Balancer -&gt; Generator: tag(s)
</li>
<li>Generator -&gt; Library: (request-question tag)
</li>
<li>Library -&gt; Generator: (question (stream-car (cdr tag-stream))) =&gt; question
</li>
</ol>

</li>
<li>Generator -&gt; Controller: question
</li>
</ol>

</li>
<li>Controller -&gt; Client: question
</li>
</ol>

</div>

</div>

<div id="outline-container-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> First Evaluation</h3>
<div class="outline-text-3" id="text-1-3">

<ol>
<li>Client -&gt; Controller: (controller 'evaluate-answer answer)
<ol>
<li>Controller -&gt; Evaluator: (evaluate-answer answer)
<ol>
<li>Evaluator -&gt; Library: (request-solution-pattern-and-rules)
</li>
<li>Library -&gt; Evaluator: solution-pattern rules
</li>
<li>= Evaluator: answer/solution-pattern/rules =&gt; evaluation
</li>
<li>Evaluator -&gt; Balancer: evaluation
<ol>
<li>Balancer: (store-new-score)
</li>
</ol>

</li>
<li>Balancer -&gt; Evaluator: evaluation
</li>
</ol>

</li>
<li>Evaluator -&gt; Controller: evaluation
</li>
</ol>

</li>
<li>Controller -&gt; Client: evaluation
</li>
<li>Client -&gt; Controller: (controller 'generate-question) =&gt; Restart above.
</li>
</ol>

</div>

</div>

<div id="outline-container-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Back to Go</h3>
<div class="outline-text-3" id="text-1-4">

<p>Shortened Cycle now all data is loaded.
</p></div>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> The Session Controller</h2>
<div class="outline-text-2" id="text-2">


</div>

<div id="outline-container-2-1" class="outline-4">
<h4 id="sec-2-1"><span class="section-number-4">2.1</span> <span class="todo TODO">TODO</span> Allow for a way to switch module, level: &nbsp;&nbsp;&nbsp;<span class="tag"><span class="roadmap">roadmap</span></span></h4>
<div class="outline-text-4" id="text-2-1">

<ul>
<li>in game for module? (change module and balancer gradually incorporates new tags?)
</li>
<li>total reset: store current info, move on to new settings as if restarted.
</li>
<li>Also: enable/disable additional module, to allow for learning several subjects at once.
</li>
</ul>

</div>

</div>

<div id="outline-container-2-2" class="outline-4">
<h4 id="sec-2-2"><span class="section-number-4">2.2</span> <span class="todo TODO">TODO</span> Allow for a way to switch username &nbsp;&nbsp;&nbsp;<span class="tag"><span class="roadmap">roadmap</span></span></h4>
<div class="outline-text-4" id="text-2-2">

<ul>
<li>hard reset: save and restart.
</li>
</ul>

</div>

</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Guile Documentation</h3>
<div class="outline-text-3" id="text-2-1">




<pre class="src src-scheme">coding:utf-8
!#
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Commentary:</span>

<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Controller acts as the interface between client-UIs and</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">the guilecraft modules/servers.</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Benefit is that client UIs merely have to implement some,</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">or optionally, all, exported controller procedures, which</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">ensures backward compatibility of the UIs. On the other</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">hand, extensions to guilecraft can be made in the backend</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">without having to worry about implementing all necessary </span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">changes in the UIs.</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Centralizing traffic through controller also allows for </span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">easier development of multiple simultaniously active clients</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">on one server, and reduces the amount of paths needed between</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">the lower level modules/servers.</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">It will risk creating a bottle-neck at controller, which might</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">have to be resolved by turning controller into a load-balancing</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">server, and letting session management occur further down, in</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">an as yet non-existing layer.</span>

<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Code:</span>
</pre>

</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Module Definition</h3>
<div class="outline-text-3" id="text-2-2">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define-module</span> (<span style="color: #2F8B58; font-weight: bold;">guilecraft</span> controller)
  <span style="color: #A020F0;">#:export</span> (controller)                 <span style="color: #204A87;">; </span><span style="color: #204A87;">by client</span>
  <span style="color: #A020F0;">#:use-module</span> (guilecraft generator)   <span style="color: #204A87;">; </span><span style="color: #204A87;">for compile-question</span>
  <span style="color: #A020F0;">#:use-module</span> (guilecraft evaluator)   <span style="color: #204A87;">; </span><span style="color: #204A87;">for request-evaluation</span>
)
</pre>

</div>

</div>

<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> Session Manager</h3>
<div class="outline-text-3" id="text-2-3">


</div>

<div id="outline-container-2-3-1" class="outline-4">
<h4 id="sec-2-3-1"><span class="section-number-4">2.3.1</span> Introduction</h4>
<div class="outline-text-4" id="text-2-3-1">

<p>Users interact with Guilecraft through a client. To facilitate the easy development of multiple different clients, Guilecraft channels this interaction through Controller. Controller is the single point of entry and exit for data — it accepts commands from the client and returns Guilecraft data.
</p></div>

</div>

<div id="outline-container-2-3-2" class="outline-4">
<h4 id="sec-2-3-2"><span class="section-number-4">2.3.2</span> Code</h4>
<div class="outline-text-4" id="text-2-3-2">

<ul>
<li id="sec-2-3-2-1"><span class="todo TODO">TODO</span> integrate request-evaluation @ Evaluator &nbsp;&nbsp;&nbsp;<span class="tag"><span class="basic">basic</span></span><br/>
</li>
</ul>
<ul>
<li id="sec-2-3-2-2">Enable profile selection<br/>
</li>
</ul>
<ul>
<li id="sec-2-3-2-3">Enable module selection<br/>
</li>
</ul>
<ul>
<li id="sec-2-3-2-4">Enable Level Selection (intelligent?)<br/>
</li>
</ul>
<ul>
<li id="sec-2-3-2-5">Code:<br/>



<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">controller</span> command . parameters)
    (<span style="color: #A52A2A; font-weight: bold;">let</span> ((profile <span style="color: #4E9A06;">"atheia"</span>)
          (module <span style="color: #4E9A06;">"guile"</span>)
          (level 1))
      (<span style="color: #A52A2A; font-weight: bold;">cond</span> ((eqv? command 'generate-question)
             (compile-question))        <span style="color: #204A87;">;</span><span style="color: #204A87;">from Generator</span>
            ((eqv? command 'evaluate-answer)
             (request-evaluation (car parameters))))))
</pre>


</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> Old Functions</h3>
<div class="outline-text-3" id="text-2-4">


</div>

<div id="outline-container-2-4-1" class="outline-4">
<h4 id="sec-2-4-1"><span class="section-number-4">2.4.1</span> Request Challenge</h4>
<div class="outline-text-4" id="text-2-4-1">

<p>This is now superseded: question selection is entirely handled by the Generator, which merely returns the value of question through request question above. 
(define (request-challenge)
  "Procedure to return a question to a requesting client.
No input is necessary at this stage."
  (request-question                     ; From Library
   (problem-ID-store                    ; From .here.
    (choose-problem problems))))        ; From Generator
</p>
</div>

</div>

<div id="outline-container-2-4-2" class="outline-4">
<h4 id="sec-2-4-2"><span class="section-number-4">2.4.2</span> Problem ID Store</h4>
<div class="outline-text-4" id="text-2-4-2">

<p>This is now superseded because controller is no longer used to store the problem ID. This is handled by the streams in the library.
;;; choose-problem in request-challenge returns a problem-ID 
;;; which is then needed by request-evaluation:
(define (problem-ID-store problem-ID)
  "Procedure which stores problem-ID in use for future reference, or releases it.
To store, invoke with 'store as the first argument and the problem-ID as the second argument.
To retrieve, invoke with 'retrieve as the first argument.
In both cases problem-ID-store returns the problem-ID."
  (if (&gt;= problem-ID 0)
      (begin
        (set! ID problem-ID)            ; Change global state
        ID)                             ; Return new global state
      ID))                              ; Return old global state
</p>
</div>

</div>

<div id="outline-container-2-4-3" class="outline-4">
<h4 id="sec-2-4-3"><span class="section-number-4">2.4.3</span> Request Evaluation</h4>
<div class="outline-text-4" id="text-2-4-3">

<p>This is now located in Evaluator — controller merely calls it from evaluator and expects the result of evalution. This is the result of placing the problem-ID-store within the sphere of the library.
(define (request-evaluation answer)
  "Procedure to return #t or #f to the client upon being called with the user's answer. 
</p>
<p>
This procedure would originally also return additional information, like the solution, explanation and links to education. This is now conceived off as being handled by further queries from the client."
  (ranking-put                          ; From balancer
   (problem-ID-store -1)                ; From .here.
   (if (correct-answer?                 ; From Evaluator
        (problem-ID-store -1)           ; From .here.
        answer)                         ; From client
       #t                               ; Evaluation for ranking-put
       #f)))                            ; Evaluation for ranking-put
</p>
</div>
</div>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> The Generator</h2>
<div class="outline-text-2" id="text-3">


</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Guile Documentation</h3>
<div class="outline-text-3" id="text-3-1">




<pre class="src src-scheme">coding:utf-8
!#
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Commentary:</span>

<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Generator picks lowest ranking (weighting supplied by </span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">balancer) question from available problem IDs </span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">(supplied by library), or picks random if multiple </span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">lowest ranks. Returns question &amp; meta info to UI.</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Stores Problem-ID for query by Evaluator.</span>

<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Code:</span>
</pre>

</div>

</div>

<div id="outline-container-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Module Definition</h3>
<div class="outline-text-3" id="text-3-2">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define-module</span> (<span style="color: #2F8B58; font-weight: bold;">guilecraft</span> generator)
    <span style="color: #A020F0;">#:export</span> (compile-question)         <span style="color: #204A87;">; </span><span style="color: #204A87;">by Controller</span>
    <span style="color: #A020F0;">#:use-module</span> (guilecraft balancer)  <span style="color: #204A87;">; </span><span style="color: #204A87;">for request-tags</span>
    <span style="color: #A020F0;">#:use-module</span> (guilecraft library)   <span style="color: #204A87;">; </span><span style="color: #204A87;">for request-question</span>
)
</pre>

</div>

</div>

<div id="outline-container-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Generator</h3>
<div class="outline-text-3" id="text-3-3">


</div>

<div id="outline-container-3-3-1" class="outline-4">
<h4 id="sec-3-3-1"><span class="section-number-4">3.3.1</span> Introduction</h4>
<div class="outline-text-4" id="text-3-3-1">

<p>The role of the Generator is to obtain a question. In order to do so it obtains a list of tags from the Balancer, from which it then selects one at random (if necessary) and requests a corresponding question from the stream in the library.
</p>
<p>
Compile Question:
</p><ul>
<li>first obtains a list of low-scoring or scheduled tags from Balancer, using its exported request-tags.
</li>
<li>It then selects one of those tags, using Generator's select-tag.
</li>
<li>Finally it obtains a question from library's tag-based streams using its exported request-question.
</li>
</ul>

<p>It returns the result of this operation to its caller, normally Controller.
</p></div>

</div>

<div id="outline-container-3-3-2" class="outline-4">
<h4 id="sec-3-3-2"><span class="section-number-4">3.3.2</span> Code</h4>
<div class="outline-text-4" id="text-3-3-2">

<ul>
<li id="sec-3-3-2-1"><span class="todo TODO">TODO</span> integrate request-question @ library &nbsp;&nbsp;&nbsp;<span class="tag"><span class="basic">basic</span></span><br/>
</li>
</ul>
<ul>
<li id="sec-3-3-2-2"><span class="todo TODO">TODO</span> integrate request-tags @ balancer &nbsp;&nbsp;&nbsp;<span class="tag"><span class="basic">basic</span></span><br/>
</li>
</ul>
<ul>
<li id="sec-3-3-2-3">Compile Question<br/>



<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">compile-question</span>)
    <span style="color: #4E9A06;">"Procedure which algorithmically returns one question.</span>

<span style="color: #4E9A06;">No input is necessary for this activity."</span>
    (request-question              <span style="color: #204A87;">;</span><span style="color: #204A87;">from Library</span>
     (select-tag                        <span style="color: #204A87;">;</span><span style="color: #204A87;">from Here</span>
      (request-tags))))                 <span style="color: #204A87;">;</span><span style="color: #204A87;">from Balancer</span>
</pre>

</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> Select Tag</h3>
<div class="outline-text-3" id="text-3-4">


</div>

<div id="outline-container-3-4-1" class="outline-4">
<h4 id="sec-3-4-1"><span class="section-number-4">3.4.1</span> Introduction</h4>
<div class="outline-text-4" id="text-3-4-1">

<p>Select Tag is a procedure to reduce a list containing one or more tags to only one tag, provided as a symbol.
</p>
<p>
One can envisage this being done through a sophisticated algorithm. For now it is simply done by picking the first tag in the list.
</p></div>

</div>

<div id="outline-container-3-4-2" class="outline-4">
<h4 id="sec-3-4-2"><span class="section-number-4">3.4.2</span> Code</h4>
<div class="outline-text-4" id="text-3-4-2">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">select-tag</span> tag-list)
  <span style="color: #4E9A06;">"Select exactly one tag from a list of tags.</span>

<span style="color: #4E9A06;">  Input is normally a list of tags retrieved from the Balancer. Returns a single symbol that is a tag, normally used to activate a stream in the Library."</span>
    (car tag-list))
</pre>

</div>
</div>

</div>

<div id="outline-container-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> Old Functions</h3>
<div class="outline-text-3" id="text-3-5">


</div>

<div id="outline-container-3-5-1" class="outline-4">
<h4 id="sec-3-5-1"><span class="section-number-4">3.5.1</span> Choose Problem</h4>
<div class="outline-text-4" id="text-3-5-1">

<p>This function has been significantly re-designed as a consequence of storing the current question through the use of streams in the Library.
(define (choose-problem mylist)
  "Procedure which algorithmically returns one of the lowest-ranking problem-IDs supplied via request-ranking.
No input is necessary for this activity."
  (car (request-ranked-ID mylist)))
</p>
</div>
</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> The Balancer</h2>
<div class="outline-text-2" id="text-4">


</div>

<div id="outline-container-4-1" class="outline-4">
<h4 id="sec-4-1"><span class="section-number-4">4.1</span> <span class="todo TODO">TODO</span> Balancer should be written to use a stream internally to generate the next set of lowest scoring tags. &nbsp;&nbsp;&nbsp;<span class="tag"><span class="architecture">architecture</span></span></h4>
<div class="outline-text-4" id="text-4-1">

</div>

</div>

<div id="outline-container-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Guile Documentation</h3>
<div class="outline-text-3" id="text-4-1">




<pre class="src src-scheme">coding:utf-8
!#

<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Commentary:</span>

<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Balancer provides the cache of eligible problem IDs</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">to Generator. Generator then makes the final</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">selection.</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Balancer maintains a rank for each possible question</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">which provides the ground for selection: the lower the</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">score, the more likely the question is picked.</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">The rank is revised after every player attempt at solving</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">the problem.</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">When no ranking exists Balancer obtains the initial set</span>
<span style="color: #204A87;">;;; </span><span style="color: #204A87;">of problem IDs from Library and assigns them a base rank.</span>

<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Code:</span>
</pre>

</div>

</div>

<div id="outline-container-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Module Definition</h3>
<div class="outline-text-3" id="text-4-2">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define-module</span> (<span style="color: #2F8B58; font-weight: bold;">guilecraft</span> balancer)
  <span style="color: #A020F0;">#:export</span> (request-tags                <span style="color: #204A87;">; </span><span style="color: #204A87;">used by Generator</span>
            ranking-put)                <span style="color: #204A87;">; </span><span style="color: #204A87;">used by Controller</span>
  <span style="color: #A020F0;">#:use-module</span> (guilecraft controller)  <span style="color: #204A87;">; </span><span style="color: #204A87;">for request-current-module</span>
                                        <span style="color: #204A87;">; </span><span style="color: #204A87;">No longer to be used: module name now passed as input to generator</span>
  <span style="color: #A020F0;">#:use-module</span> (guilecraft file-server) <span style="color: #204A87;">; </span><span style="color: #204A87;">for restore-balancer-data</span>
                                        <span style="color: #204A87;">; </span><span style="color: #204A87;">Not implemented yet</span>
  <span style="color: #A020F0;">#:use-module</span> (guilecraft library))    <span style="color: #204A87;">; </span><span style="color: #204A87;">for librarian 'provide-tags access</span>
</pre>

</div>

</div>

<div id="outline-container-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Request Tags: public access</h3>
<div class="outline-text-3" id="text-4-3">

<ul>
<li id="sec-4-3-1"><span class="todo TODO">TODO</span> integrate (librarian 'request-current-tag-set) @ library &nbsp;&nbsp;&nbsp;<span class="tag"><span class="basic">basic</span></span><br/>
</li>
</ul>
<ul>
<li id="sec-4-3-2"><span class="todo TODO">TODO</span> implement restore-balancer-data @ file-server &nbsp;&nbsp;&nbsp;<span class="tag"><span class="next">next</span></span><br/>
<ul>
<li id="sec-4-3-2-1"><span class="todo TODO">TODO</span> integrate request-current-module @ controller<br/>

</li>
</ul>
</li>
</ul>

</div>

<div id="outline-container-4-3-1" class="outline-4">
<h4 id="sec-4-3-1"><span class="section-number-4">4.3.1</span> Intro</h4>
<div class="outline-text-4" id="text-4-3-1">

<p>Request-tags is intended to return the list of tags that qualify equally for being used to generate a question using Library's tag-based question streams. The list of tags consists of the lowest, equal ranking tags.
</p>
<p>
Characteristics to be taken into account for the ranking of tags:
</p><ul>
<li>the result of the evaluations of previously posed problems for the same tag: correct answers increase the rank; incorrect answers decrease the rank.
</li>
<li>scheduling of tags: once a tag has reached a certain rank it will not be asked again, until a set date, at which point its rank will be dramatically reduced, resulting in its being used for question generation immediately once more.
</li>
</ul>

</div>

</div>

<div id="outline-container-4-3-2" class="outline-4">
<h4 id="sec-4-3-2"><span class="section-number-4">4.3.2</span> Code</h4>
<div class="outline-text-4" id="text-4-3-2">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">request-tags</span> module-list)
    <span style="color: #4E9A06;">"Initiate the rank table if necessary and call lowest-ranking-from-table to obtain a list of lowest ranking problems.</span>
<span style="color: #4E9A06;">Request-tags needs a list of the modules currently played, and returns a list of the tags from those modules that score the lowest rank."</span>
    (<span style="color: #A52A2A; font-weight: bold;">let</span> ((local-list '()))
      (<span style="color: #A52A2A; font-weight: bold;">cond</span> (<span style="color: #A52A2A; font-weight: bold;">or</span> (not (eq? local-list module-list))
                (eq? rank-table '())
             (populate-rank-table (librarian 'provide-tags module-list))
             (lowest-ranking-from-table rank-table 0 5 (list)))
            (<span style="color: #A52A2A; font-weight: bold;">else</span> 
             (lowest-ranking-from-table rank-table 0 5 (list))))))
</pre>

</div>
</div>

</div>

<div id="outline-container-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> Helper Functions: initial population and retrieving the lowest ranking set</h3>
<div class="outline-text-3" id="text-4-4">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">populate-rank-table</span> tag-set)
  <span style="color: #4E9A06;">"Procedure which initially populates the rank-table. It is pure side-effect, and could be called by a hook.</span>

<span style="color: #4E9A06;">  populate-rank-table requires the set of problem-IDs which it will populate the table with, as well as a default rank to assign them with.</span>

<span style="color: #4E9A06;">  Improvements:</span>
<span style="color: #4E9A06;">  - must be capable of restoring ranking across sessions -&gt; data persistence</span>
<span style="color: #4E9A06;">  - currently state-ful solution: either call it through a hook or implement a functional solution."</span>
  (<span style="color: #A52A2A; font-weight: bold;">for-each</span> (<span style="color: #A52A2A; font-weight: bold;">lambda</span> (tag)      <span style="color: #204A87;">; </span><span style="color: #204A87;">tag-set is split into its atoms: tags</span>
              (set! rank-table
                    (acons tag 
                           100 
                           rank-table)))
            tag-set))

</pre>


<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">lowest-ranking-from-table</span> 
         rank-table          <span style="color: #204A87;">; </span><span style="color: #204A87;">The state-based rank-table</span>
         tag-reference       <span style="color: #204A87;">; </span><span style="color: #204A87;">The reference of tag currently examined</span>
         lowest-rank         <span style="color: #204A87;">; </span><span style="color: #204A87;">The lowest rank so far</span>
         lowest-ranking-tag-set) <span style="color: #204A87;">; </span><span style="color: #204A87;">The tags with the lowest rank so far</span>
  <span style="color: #4E9A06;">"Simple procedure to retrieve the question-IDs with the lowest rank from rank-table.</span>

<span style="color: #4E9A06;">  Improvements:</span>
<span style="color: #4E9A06;">  - Implement a way to keep track of the current lowest rank: eliminates the need for searching the entire table recursively &#8212; instead we simply search it for any problem-IDs matching the lowest score. We could then substitute the complicated cond below for a simple map lowest-ranking? rank-table."</span>
  (<span style="color: #A52A2A; font-weight: bold;">if</span> (= (length rank-table)
         tag-reference)
      lowest-ranking-tag-set
      (<span style="color: #A52A2A; font-weight: bold;">cond</span> ((= (cdr (list-ref 
                      rank-table
                      tag-reference)) 
                lowest-rank)
             (lowest-ranking-from-table rank-table 
                                        (+ tag-reference 1)
                                        lowest-rank
                                        (append lowest-ranking-tag-set (list (car (list-ref rank-table tag-reference))))))
            ((&lt; (cdr (list-ref 
                      rank-table 
                      tag-reference))
                lowest-rank)
             (lowest-ranking-from-table rank-table
                                        (+ tag-reference 1)
                                        (cdr (list-ref rank-table tag-reference))
                                        (list (car (list-ref rank-table tag-reference)))))
            (<span style="color: #A52A2A; font-weight: bold;">else</span> (lowest-ranking-from-table rank-table
                                             (+ tag-reference 1)
                                             lowest-rank
                                             lowest-ranking-tag-set)))))
</pre>

</div>

</div>

<div id="outline-container-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> Updating the rank-table</h3>
<div class="outline-text-3" id="text-4-5">


</div>

<div id="outline-container-4-5-1" class="outline-4">
<h4 id="sec-4-5-1"><span class="section-number-4">4.5.1</span> Code:</h4>
<div class="outline-text-4" id="text-4-5-1">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">ranking-put</span> tag evaluation)
  <span style="color: #4E9A06;">"Procedure to update the current ranking of a given problem-ID on the basis of the evaluation of the player's answer to the challenge.</span>

<span style="color: #4E9A06;">  ranking-put requires the problem-ID that it will update and the result of the evaluation, with which it modifies the rank. It returns evaluation, as this function serves purely for its side-effect.</span>

<span style="color: #4E9A06;">  Improvements:</span>
<span style="color: #4E9A06;">  - call ranking-put via a hook if I decide to use the state based approach: this would tidy the code.</span>
<span style="color: #4E9A06;">  - do away with ranking-put after devising a functional solution to problem-ID ranking."</span>
  (<span style="color: #A52A2A; font-weight: bold;">begin</span>
    (assq-set! rank-table 
               tag 
               (calculate-new-rank (assq-ref rank-table tag)  <span style="color: #204A87;">; </span><span style="color: #204A87;">assq-ref returns the value of tag</span>
                                   evaluation))
    evaluation))

(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">calculate-new-rank</span> rank-table-value evaluation)
  <span style="color: #4E9A06;">"The actual algorithm used to obtain a new rank.</span>

<span style="color: #4E9A06;">  calculate-new-rank requires a the key of a value in the rank-table and the result of the evaluation of the player's answer, and returns the new ranking for that key in the rank-table."</span>
  (<span style="color: #A52A2A; font-weight: bold;">cond</span> (evaluation (+ rank-table-value 1))
        (<span style="color: #A52A2A; font-weight: bold;">else</span> (- rank-table-value 1))))
</pre>

</div>
</div>

</div>

<div id="outline-container-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> State: rank-table</h3>
<div class="outline-text-3" id="text-4-6">

<p>Currently balancer uses a state variable, alist, to maintain its ranking:
</p>


<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> <span style="color: #00578E; font-weight: bold;">rank-table</span> (list))
</pre>

</div>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> The Library</h2>
<div class="outline-text-2" id="text-5">


</div>

<div id="outline-container-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> Guile Documentation</h3>
<div class="outline-text-3" id="text-5-1">




<pre class="src src-scheme">coding:utf-8
!#

<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Commentary:</span>

<span style="color: #204A87;">;; </span><span style="color: #204A87;">library handles all in-game module data. </span>
<span style="color: #204A87;">;; </span><span style="color: #204A87;">Library stores in-game module and level data, </span>
<span style="color: #204A87;">;; </span><span style="color: #204A87;">- requests information from fs handler on load</span>
<span style="color: #204A87;">;; </span><span style="color: #204A87;">- pushes information to fs handler for writing</span>
<span style="color: #204A87;">;; </span><span style="color: #204A87;">Is asked for info by question evaluator, weighting </span>
<span style="color: #204A87;">;; </span><span style="color: #204A87;">system question generator.</span>

<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Code:</span>
</pre>

</div>

</div>

<div id="outline-container-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> Module Definition</h3>
<div class="outline-text-3" id="text-5-2">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define-module</span> (<span style="color: #2F8B58; font-weight: bold;">guilecraft</span> library)
  <span style="color: #A020F0;">#:export</span> (librarian          <span style="color: #204A87;">;</span><span style="color: #204A87;">used by Balancer, Generator, Evaluator</span>
            )
  <span style="color: #A020F0;">#:use-module</span> (guilecraft data-types)
  <span style="color: #A020F0;">#:use-module</span> (guilecraft file-server))
</pre>

</div>

</div>

<div id="outline-container-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> Librarian:</h3>
<div class="outline-text-3" id="text-5-3">

<p>Librarian is the exposed library module function. It is called with a COMMAND, and potentially with a parameter, if the command requires it.
Librarian is a dispatcher, which then proceeds to execute the required functions that retrieve the requested information from the Library.
</p>


<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">librarian</span> command . parameters)
  <span style="color: #4E9A06;">"Scans an incoming request for @var{command} and invokes the correct procedure to resolve it.</span>

<span style="color: #4E9A06;">@var{parameters} must be:</span>
<span style="color: #4E9A06;">- a tag, if the command is 'provide-question or 'provide-solution</span>
<span style="color: #4E9A06;">- a module, if the command is 'build-library.</span>

<span style="color: #4E9A06;">'provide-tags is a thunk that simply returns all tags currently providing a stream within the library."</span>
  (<span style="color: #A52A2A; font-weight: bold;">cond</span> ((provide-tags? command)
         (retrieve-current-tag-set))
        ((provide-question? command) 
         (retrieve-current-question parameter))
        ((provide-solution? command)
         (retrieve-current-solution))
        ((build-library? command)
         (build-library parameter))
        (<span style="color: #A52A2A; font-weight: bold;">else</span> #f)))
</pre>

<p>
Library provides the data for all things module. It provides:
</p><ul>
<li>a current list of active tags, through RETRIEVE-CURRENT-TAG-SET
</li>
<li>one stream per active tag, providing through this an interface to problem data, sorted by tag.
</li>
</ul>

<p>The streams are accessed by calling LIBRARIAN with with the PROVIDE-QUESTION or PROVIDE-SOLUTION commands, both of which require a tag as a parameter. Librarian will then call either RETRIEVE-CURRENT-QUESTION or RETRIEVE-CURRENT-SOLUTION to obtain data from the streams corresponding to the tag in question.
Whenever new data needs to be added to the library, the BUILD-LIBRARY command is issued. It updates the list of active tags
</p>


<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">retrieve-current-tag-set</span>)
    ())
</pre>


<pre class="src src-scheme"><span style="color: #204A87;">;; </span><span style="color: #204A87;">Commands:</span>
(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">provide-level?</span> subject)
  (eqv? 'provide-level subject))
(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">provide-tags?</span> subject)
  (eqv? 'provide-tags subject))
(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">provide-question?</span> subject)
  (eqv? 'provide-question subject))
(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">provide-solution?</span> subject)
  (eqv? 'provide-solution subject))
(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">build-library?</span> subject)
  (eqv? 'build-library subject))
</pre>

</div>

</div>

<div id="outline-container-5-4" class="outline-3">
<h3 id="sec-5-4"><span class="section-number-3">5.4</span> Library</h3>
<div class="outline-text-3" id="text-5-4">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">request-problem-ID-set</span> mylist)
  <span style="color: #4E9A06;">"Procedure used by Balancer to obtain the initial list of problem-IDs in use for the duration of this session. This list needs to be refreshed when a different module or level is chosen.</span>
<span style="color: #4E9A06;">GAP IN LOGIC.</span>
<span style="color: #4E9A06;">problem-IDs are simply the index to the list of problems in the problems holder problems below."</span>
  (create-list-ID-set (length mylist) 0 (list)))
</pre>



<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">create-list-ID-set</span> list-length counter problem-ID-set)
  (<span style="color: #A52A2A; font-weight: bold;">cond</span> ((= counter list-length)
         problem-ID-set)
        ((create-list-ID-set list-length
                              (+ counter 1)
                              (append problem-ID-set (list counter))))))
</pre>



<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">request-question</span> problem-ID)
  <span style="color: #4E9A06;">"Procedure used by Generator to obtain the question to ask the player after selecting one.</span>
<span style="color: #4E9A06;">List of suitable problem-IDs will have been provided to Generator by Balancer."</span>
  (question (list-ref problems problem-ID)))

</pre>



<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">request-solution</span> problem-ID)
  <span style="color: #4E9A06;">"Procedure used by Evaluator to obtain the solution to the problem posed to the player after the player has attempted to answer thus.</span>
<span style="color: #4E9A06;">problem-ID is provided by Generator to Evaluator upon request, after which Evaluator requests the solution from Library."</span>
  (solution (list-ref problems problem-ID)))

</pre>


</div>

</div>

<div id="outline-container-5-5" class="outline-3">
<h3 id="sec-5-5"><span class="section-number-3">5.5</span> Library as a stream</h3>
<div class="outline-text-3" id="text-5-5">

<p>A new experiment is to let library provide sets of problems through a stream. This paves the way for providing 'dynamic problems', which describe the rules for generating problems rather than explicitly programming the individual problems. Using streams preserves the ability to use 'programmed' problems.
</p>


<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">stream-element-selector</span> target-element state stream) 
  <span style="color: #4E9A06;">"Pick an @var{target-element} that is a member of a @var{stream}.</span>
<span style="color: #4E9A06;">Target element is essentially the index reference for the desired element of the stream."</span>
  (<span style="color: #A52A2A; font-weight: bold;">if</span> (= state target-element)
      (stream-car stream)
      (stream-element-selector target-element (+ state 1) (stream-cdr stream))))
</pre>

</div>

</div>

<div id="outline-container-5-6" class="outline-3">
<h3 id="sec-5-6"><span class="section-number-3">5.6</span> Old functions:</h3>
<div class="outline-text-3" id="text-5-6">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">request-problem-ID-set</span> mylist)
  <span style="color: #4E9A06;">"Procedure used by Balancer to obtain the initial list of problem-IDs in use for the duration of this session. This list needs to be refreshed when a different module or level is chosen.</span>
<span style="color: #4E9A06;">GAP IN LOGIC.</span>
<span style="color: #4E9A06;">problem-IDs are simply the index to the list of problems in the problems holder problems below."</span>
  (create-list-ID-set (length mylist) 0 (list)))
</pre>



<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">create-list-ID-set</span> list-length counter problem-ID-set)
  (<span style="color: #A52A2A; font-weight: bold;">cond</span> ((= counter list-length)
         problem-ID-set)
        ((create-list-ID-set list-length
                              (+ counter 1)
                              (append problem-ID-set (list counter))))))
</pre>



<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">request-tag</span> problem-ID)
  <span style="color: #4E9A06;">"Procedure used by Balancer to obtain the tags corresponding to the problem-IDs supplied to it by library through request-problem-ID-set. The tags are used to group problems together. Balancing scores are applied to tags rather than individual problems."</span>
  (tag (list-ref problems problem-ID)))

</pre>



<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">request-question</span> problem-ID)
  <span style="color: #4E9A06;">"Procedure used by Generator to obtain the question to ask the player after selecting one.</span>
<span style="color: #4E9A06;">List of suitable problem-IDs will have been provided to Generator by Balancer."</span>
  (question (list-ref problems problem-ID)))

</pre>



<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">request-solution</span> problem-ID)
  <span style="color: #4E9A06;">"Procedure used by Evaluator to obtain the solution to the problem posed to the player after the player has attempted to answer thus.</span>
<span style="color: #4E9A06;">problem-ID is provided by Generator to Evaluator upon request, after which Evaluator requests the solution from Library."</span>
  (solution (list-ref problems problem-ID)))

</pre>

</div>
</div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> The File Server</h2>
<div class="outline-text-2" id="text-6">


</div>

<div id="outline-container-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> Introduction</h3>
<div class="outline-text-3" id="text-6-1">

<p>The file server is supposed to act as an interface between guilecraft's internal data-structure and the persistent/backup data that is stored in XML format on the filesystem. Examples of data stored in the filesystem are:
</p><ul>
<li>modules (levels, problems, achievements)
</li>
<li>user-serv (not implemented yet: user profile information such as authentication)
</li>
<li>statistics (not implemented yet, but essential for the balancing algorithms and for user introspection)
</li>
<li>user-profile (not implemented yet: user profile data that tracks module and learning progress and ties achievements to profiles)
</li>
</ul>

<p>All xml/sxml processing takes place within the file-server.
</p>
</div>

<div id="outline-container-6-1-1" class="outline-4">
<h4 id="sec-6-1-1"><span class="section-number-4">6.1.1</span> When is file-server used?</h4>
<div class="outline-text-4" id="text-6-1-1">

<p>Guilecraft is designed in such a way that files are only read from the file-server when absolutely necessary. This will either be when information is accessed for the first time (e.g. when the player has chosen a module to play, and that module has not previously been accessed by the running instance of Guilecraft).
Selector components, for instance module-selection or profile-selection, always request a latest version from the file-server, to allow for revisions of loaded modules or profiles.
</p></div>

</div>

<div id="outline-container-6-1-2" class="outline-4">
<h4 id="sec-6-1-2"><span class="section-number-4">6.1.2</span> Guilecraft is non-destructive</h4>
<div class="outline-text-4" id="text-6-1-2">

<p>Guilecraft is written in the functional paradigm and is non-destructive in relation to data it stores on the file-system. 
</p><ul>
<li>Cleaning functions need to be provided, to remove 'obsolete' data as and when required, without threatening the capabilities of Guilecraft (rollback, looking back in history, etc.).
</li>
<li>file-server needs to have a means of establishing what 'version' of the files it is accessing it needs to access. By default file-server will always work with the 'current' version, that is the latest version available. A method must be provided to fall-back to prior versions.
</li>
<li>this method is likely to be a system of symlinks.
</li>
</ul>

</div>
</div>

</div>

<div id="outline-container-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> Module definition</h3>
<div class="outline-text-3" id="text-6-2">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define-module</span> (<span style="color: #2F8B58; font-weight: bold;">guilecraft</span> file-server)
  <span style="color: #A020F0;">#:export</span> (get-from-file-server)
  <span style="color: #A020F0;">#:use-module</span> (sxml ssax))
</pre>

</div>

</div>

<div id="outline-container-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> Entrance — get-from-file-server, put-on-file-server and select-from-file-server:</h3>
<div class="outline-text-3" id="text-6-3">

<p>All queries to the file-server enter through one of three functions:
</p><ul>
<li><a href="#get-from-file-server">get-from-file-server</a>
</li>
<li><a href="#put-on-file-server">put-on-file-server</a>
</li>
<li><a href="#sec-6-3-3">select-from-file-server</a>
</li>
</ul>


</div>

<div id="outline-container-6-3-1" class="outline-4">
<h4 id="sec-6-3-1"><span class="section-number-4">6.3.1</span> get-from-file-server</h4>
<div class="outline-text-4" id="text-6-3-1">

<p>Gffs calls procedures within this module as needed in order to return a guile data-type (probably in the form of vlists) to the caller. 
The first task to be carried out by gffs is to correlate the provided "what" symbol with a filesystem path. To this end gffs calls resolve-path, which in turn should call gffs, this time with a path in "what's" place.
Gffs is then able to call get-data with a path to actually retrieve the data and have it return the data-type to return to the file-server caller.
</p>


<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">get-from-file-server</span> what . who)
  <span style="color: #4E9A06;">"Exported function returning the contents of an xml guilecraft config file in Guile data-format.</span>

<span style="color: #4E9A06;">Requires a recognised target to fetch, as symbol from a list, and, depending on the target, a further argument that specifies the sub-location to fetch.</span>

<span style="color: #4E9A06;">get-from-file-server returns the data requested or 'fail"</span>
  (<span style="color: #A52A2A; font-weight: bold;">cond</span> ((not (eqv? '() who))
         (resolve-path what who))
        ((symbol? what)
         (resolve-path what))
        (<span style="color: #A52A2A; font-weight: bold;">else</span> (get-data what))))
</pre>

<ul>
<li id="sec-6-3-1-1">get-data<br/>
get-data actually opens a file as input port and calls the ssax xml parser on the file and returns an sxml list. As expected it exits on error.

<p>
The only responsibility of get-data is to return the list, so it can be passed back to the component that requested file-system information. That component then needs to analyse the returned list and convert it into data it can use.
</p>
<p>
The benefit is that get-data does not need to concern itself with the Guilecraft internal representation of component objects, and conversely, the internal components need not concern themselves with the file-system or sxml.
</p>
<p>
While file-server won't return 'invalid XML data', it could still return gobbledygook from the component's perspective (e.g. non-valid Guilecraft question types). Components need to perform validation.
</p>



<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">get-data</span> uri)
  <span style="color: #4E9A06;">"requires uri to Guilecraft XML file, returns a list with the elements of that file."</span>
  (ssax:xml-&gt;sxml (open-input-file uri) '())
  )
</pre>

</li>
</ul>
</div>

</div>

<div id="outline-container-6-3-2" class="outline-4">
<h4 id="sec-6-3-2"><span class="section-number-4">6.3.2</span> put-on-file-server</h4>
<div class="outline-text-4" id="text-6-3-2">

<p>Pofs is the persistent data saving component of Guilecraft. It should require a Guile data-type (probably vlist) a "what" symbol and, depending on "what" is being saved, a "who" symbol.
</p>


<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">put-on-file-server</span> data what . who)
  <span style="color: #4E9A06;">"put-on-file-server stores DATA as WHAT on the filesystem. WHAT and WHO are used to determine the path of the xml file in which the data is to be stored.</span>

<span style="color: #4E9A06;">Put-on-file-server is called for its side-effect. It returns 'success or 'fail."</span>)
</pre>

</div>

</div>

<div id="outline-container-6-3-3" class="outline-4">
<h4 id="sec-6-3-3"><span class="section-number-4">6.3.3</span> select-from-file-server</h4>
<div class="outline-text-4" id="text-6-3-3">

<p>sffs fulfills two roles:
</p><ul>
<li>it provides data that can be used by interfaces to provide menus to users
</li>
<li>it makes Guilecraft aware of newer versions of data stored on the file-system, thus allowing in-session dynamic re-loading of data.
</li>
</ul>

</div>

</div>

<div id="outline-container-6-3-4" class="outline-4">
<h4 id="sec-6-3-4"><span class="section-number-4">6.3.4</span> Helper functions</h4>
<div class="outline-text-4" id="text-6-3-4">

<p>This section details a number of helper functions that are used by the root functions described above.
</p><ul>
<li id="sec-6-3-4-1">resolve-path<br/>
rp expects a WHAT symbol and returns the associated path.
When the WHAT symbol is module or user the additional symbol WHO is employed to establish the full path to be returned.



<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">resolve-path</span> what . who)
  (<span style="color: #A52A2A; font-weight: bold;">cond</span> ((not (symbol? what))
         'what-not-symbol)
        ((eqv? what 'user-serv)
         <span style="color: #4E9A06;">"users/user-serv.xml"</span>)
        ((eqv? what 'statistics)
         <span style="color: #4E9A06;">"statistics/statistics.xml"</span>)
        ((not (eqv? '() who))
         (<span style="color: #A52A2A; font-weight: bold;">cond</span> ((eqv? what 'module)
                (string-append <span style="color: #4E9A06;">"modules/"</span> (symbol-&gt;string (car who)) <span style="color: #4E9A06;">"/module.xml"</span>))
               ((eqv? what 'user-profile)
                (string-append <span style="color: #4E9A06;">"modules/"</span> (symbol-&gt;string (car who)) <span style="color: #4E9A06;">"/user.xml"</span>))
               (<span style="color: #A52A2A; font-weight: bold;">else</span> 'who-but-not-what)))
        (<span style="color: #A52A2A; font-weight: bold;">else</span> 'not-a-recognised-symbol)))
</pre>

</li>
</ul>
</div>
</div>
</div>

</div>

<div id="outline-container-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> The Data Types</h2>
<div class="outline-text-2" id="text-7">


</div>

<div id="outline-container-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> Guile Documentation</h3>
<div class="outline-text-3" id="text-7-1">

<p>First, the documentation segment, which serves to create the basic live documentation which can be called whilst hacking guilecraft, by calling (help (guilecraft data-types)).
</p>


<pre class="src src-scheme">coding:utf-8
!#

<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Commentary:</span>

<span style="color: #204A87;">;; </span><span style="color: #204A87;">Data-types defines the creators and selectors</span>
<span style="color: #204A87;">;; </span><span style="color: #204A87;">used throughout guilecraft. It is loaded by</span>
<span style="color: #204A87;">;; </span><span style="color: #204A87;">all other modules.</span>

<span style="color: #204A87;">;;; </span><span style="color: #204A87;">Code:</span>
</pre>

</div>

</div>

<div id="outline-container-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> Module Definition</h3>
<div class="outline-text-3" id="text-7-2">

<p>Then, exporting the data types to be used throughout the rest of guilecraft. Not all data-types are exported as many of the basic types are only used by the procedures used to create the more advanced data-types.
</p>


<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define-module</span> (<span style="color: #2F8B58; font-weight: bold;">guilecraft</span> data-types)
  <span style="color: #A020F0;">#:export</span> (make-gc-module
            make-level
            make-problem
            make-question
            make-solution
            make-tag
            gc-module?
            level?
            problem?
            question?
            solution?
            tag?
            level
            problem
            question
            solution
            tag
            type
            content))
</pre>

</div>

</div>

<div id="outline-container-7-3" class="outline-3">
<h3 id="sec-7-3"><span class="section-number-3">7.3</span> Creators</h3>
<div class="outline-text-3" id="text-7-3">


</div>

<div id="outline-container-7-3-1" class="outline-4">
<h4 id="sec-7-3-1"><span class="section-number-4">7.3.1</span> Question</h4>
<div class="outline-text-4" id="text-7-3-1">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">make-question</span> content)
  <span style="color: #4E9A06;">"Fundamental data type."</span>
  (cons 'question content)) 
</pre>


</div>

</div>

<div id="outline-container-7-3-2" class="outline-4">
<h4 id="sec-7-3-2"><span class="section-number-4">7.3.2</span> Solution</h4>
<div class="outline-text-4" id="text-7-3-2">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">make-solution</span> content)
  <span style="color: #4E9A06;">"Fundamental data type carrying the value of the right answer for a problem."</span>
  (cons 'solution content)) 
</pre>

</div>

</div>

<div id="outline-container-7-3-3" class="outline-4">
<h4 id="sec-7-3-3"><span class="section-number-4">7.3.3</span> Tag</h4>
<div class="outline-text-4" id="text-7-3-3">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">make-tag</span> content)
  <span style="color: #4E9A06;">"Fundamental data-type carrying meta-data about a problem, allowing problems to be grouped by problem area.</span>

<span style="color: #4E9A06;">Example: two problems, (+ 2 2) and (+ 7 10), might both have the tag 'addition, as both are instances of that operation."</span>
  (cons 'tag content)) 
</pre>

</div>

</div>

<div id="outline-container-7-3-4" class="outline-4">
<h4 id="sec-7-3-4"><span class="section-number-4">7.3.4</span> Problems</h4>
<div class="outline-text-4" id="text-7-3-4">

<ul>
<li id="sec-7-3-4-1">Open Problems<br/>



<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">make-open-problem</span> question solution tag)
  <span style="color: #4E9A06;">"Open-problem compound data-type creator. </span>
<span style="color: #4E9A06;">Open problems are a type of problem. Problems are the fundamental data-type used in interactions with users. At heart they consist of a question, a solution and a tag for grouping different problems together. Problems are subsumed within levels and modules in turn."</span>
  (list 'problem question solution tag))
</pre>

</li>
</ul>
</div>

</div>

<div id="outline-container-7-3-5" class="outline-4">
<h4 id="sec-7-3-5"><span class="section-number-4">7.3.5</span> Level</h4>
<div class="outline-text-4" id="text-7-3-5">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">make-level</span> . problems)
  <span style="color: #4E9A06;">"Level compound data-type creator. </span>
<span style="color: #4E9A06;">Levels are logical groupings of problems for guilecraft. They consist of any number of problems which are combined to set a soft limit to the number of problems that are added to the balancing algorithm at any one time."</span>
  (cons 'level problems))
</pre>

</div>

</div>

<div id="outline-container-7-3-6" class="outline-4">
<h4 id="sec-7-3-6"><span class="section-number-4">7.3.6</span> Module</h4>
<div class="outline-text-4" id="text-7-3-6">




<pre class="src src-scheme">  (<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">make-gc-module</span> . levels)
    <span style="color: #4E9A06;">"Module compound data-type creator. </span>
<span style="color: #4E9A06;">  Modules are the primary way by which sets of problems, through the grouping of levels, are linked into a whole in Guilecraft. Modules consist of any number of levels.</span>
<span style="color: #4E9A06;">Modules should be thought of as narrating devices which provide a context through which users can engage with study materials."</span>
    (cons 'module levels))
</pre>

</div>
</div>

</div>

<div id="outline-container-7-4" class="outline-3">
<h3 id="sec-7-4"><span class="section-number-3">7.4</span> Selectors</h3>
<div class="outline-text-3" id="text-7-4">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">type</span> guilecraft-base-data)
  (car guilecraft-base-data))
(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">content</span> guilecraft-base-data)
  (cdr guilecraft-base-data))
</pre>


<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">question</span> problem)
  <span style="color: #4E9A06;">"Problem compound data-type caar selector."</span>
  (cadr problem))

(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">solution</span> problem)
  <span style="color: #4E9A06;">"Problem compound data-type cdar selector."</span>
  (caddr problem))

(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">tag</span> problem)
  <span style="color: #4E9A06;">"Problem compound data-type selector to read the tag.</span>
<span style="color: #4E9A06;">Problems are grouped by tag, which allows for the ranking </span>
<span style="color: #4E9A06;">of problems as a group."</span>
 (cadddr problem))
</pre>


<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">problem</span> index level)
  (<span style="color: #A52A2A; font-weight: bold;">if</span> (&gt; index (length (content level)))
      'index-out-of-range
      (list-ref level index)))

(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">level</span> index module)
  (<span style="color: #A52A2A; font-weight: bold;">if</span> (&gt; index (length (content module)))
      'index-out-of-range
      (list-ref module index)))
</pre>

</div>

</div>

<div id="outline-container-7-5" class="outline-3">
<h3 id="sec-7-5"><span class="section-number-3">7.5</span> Predicates</h3>
<div class="outline-text-3" id="text-7-5">




<pre class="src src-scheme">(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">gc-module?</span> obj)
  <span style="color: #4E9A06;">"test whether @var{obj} is a guilecraft module"</span>
  (<span style="color: #A52A2A; font-weight: bold;">if</span> (eqv? (type obj) 'module)
      #t
      #f))
(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">level?</span> obj)
  <span style="color: #4E9A06;">"test whether @var{obj} is a guilecraft level."</span>
  (<span style="color: #A52A2A; font-weight: bold;">if</span> (eqv? (type obj) 'level)
      #t
      #f))
(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">problem?</span> obj)
  <span style="color: #4E9A06;">"test whether @var{obj} is a guilecraft problem."</span>
  (<span style="color: #A52A2A; font-weight: bold;">if</span> (eqv? (type obj) 'problem)
      #t
      #f))
(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">question?</span> obj)
  <span style="color: #4E9A06;">"test whether @var{obj} is a guilecraft question"</span>
  (<span style="color: #A52A2A; font-weight: bold;">if</span> (eqv? (type obj) 'question)
      #t
      #f))
(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">solution?</span> obj)
  <span style="color: #4E9A06;">"test whether @var{obj} is a guilecraft solution"</span>
  (<span style="color: #A52A2A; font-weight: bold;">if</span> (eqv? (type obj) 'solution)
      #t
      #f))
(<span style="color: #A52A2A; font-weight: bold;">define</span> (<span style="color: #00578E; font-weight: bold;">tag?</span> obj)
  <span style="color: #4E9A06;">"test whether @var{obj} is a guilecraft tag"</span>
  (<span style="color: #A52A2A; font-weight: bold;">if</span> (eqv? (type obj) 'tag)
      #t
      #f))
</pre>


</div>
</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2012-11-10T10:26+0000</p>
<p class="author">Author: Alex Sassmannshausen</p>
<p class="creator"><a href="http://orgmode.org">Org</a> version 7.9.2 with <a href="http://www.gnu.org/software/emacs/">Emacs</a> version 24</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
